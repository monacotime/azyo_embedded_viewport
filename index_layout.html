<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Azyo In context</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link href="azyo_sheet.css" rel="stylesheet" />
    <link href="azyo_flipcard.css" rel="stylesheet" />
</head>
<body>
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
        view 1
    </button>
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal2">
        view 2
    </button>
    <!-- <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal22">
        view 2 - 2
    </button> -->
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal3" onclick="rotatess()">
        view 3
    </button>
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal4">
        view 4
    </button>
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal5">
        view 4 result
    </button>
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal99">
        view 99
    </button>
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal98">
        view 98
    </button>

    <!-- Modal 1 -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg azyo-modal-dialog" role="document">
        <div class="modal-content azyo-modal-content">
            <div class="modal-header azyo-modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Let's get you verified</h5>
                <button type="button" class="close azyo-close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <h6 class="azyo-modal-body-title">
                    Demo Inc would like to confirm your identity, a process powered by AZYO.
                </h6>
                <h7>
                    BEFORE YOU START, PLEASE:
                </h7>
                <br>
                <ul>
                    <li>Prepare a valid government-issued identity document</li>
                    <li>Check if your deviceâ€™s camera is uncovered and working</li>
                    <li>Be prepared to take a selfie and photos of your ID</li>
                </ul>
                <br>
                <div style="margin-left: 40px; font-size: large;">
                    <span>
                        <h7>
                            Document:    
                        </h7>
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="document_type" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                              Select Document
                            </button>
                            <div class="dropdown-menu" aria-labelledby="document_type">
                              <button class="dropdown-item" type="button">Aadhaar Card</button>
                              <button class="dropdown-item" type="button">PAN Card</button>
                              <button class="dropdown-item" type="button">Passport</button>
                              <button class="dropdown-item" type="button">Driving License</button>
                            </div>
                          </div>
    
                        
                        <script>
                            let links = document.querySelectorAll('.dropdown-item')
                            links.forEach(element => element.addEventListener("click", function () {
                                let text = element.innerText
                                document.getElementById('document_type').innerText = text
                            }))
                        </script>
                    </span>
                    <br>
                    <span>
                        <h7>
                            Country:     
                        </h7>
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="country" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                              Select Country
                            </button>
                            <div class="dropdown-menu" aria-labelledby="country">
                              <button class="dropdown-item cou" type="button">IND</button>
                              <button class="dropdown-item cou" type="button">USA</button>
                              <button class="dropdown-item cou" type="button">CAN</button>
                            </div>
                          </div>
    
                        
                        <script>
                            let stalinks = document.querySelectorAll('.cou')
                            stalinks.forEach(element => element.addEventListener("click", function () {
                                let text = element.innerText
                                document.getElementById('country').innerText = text
                            }))
                        </script>
                    </span>
                    <br>
                    <span>
                        <h7>
                            State:    
                        </h7>
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="state" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                              Select State
                            </button>
                            <div class="dropdown-menu" aria-labelledby="state">
                              <button class="dropdown-item sta" type="button">Delhi</button>
                              <button class="dropdown-item sta" type="button">Maharashtra</button>
                              <button class="dropdown-item sta" type="button">Chennai</button>
                            </div>
                        </div>
                        
                        <script>
                            let coulinks = document.querySelectorAll('.sta')
                            coulinks.forEach(element => element.addEventListener("click", function () {
                                let text = element.innerText
                                document.getElementById('state').innerText = text
                            }))
                        </script>
                    </span>
                </div>
            </div>
            <div class="modal-footer azyo-moal-footer">
                <button type="button" class="btn btn-primary">Start Session</button>
                <p class = "azyo-cc">Powered by AZYO</p>
            </div>
        </div>
        </div>
    </div> 

    <!-- Modal 2 -->
    <!-- <div class="modal fade" id="exampleModal2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg azyo-modal-dialog" role="document">
        <div class="modal-content azyo-modal-content">
            <div class="modal-header azyo-modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Take a selfie</h5>
                <button type="button" class="close azyo-close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <h6 class="azyo-modal-body-title">
                    Make sure that your face is in the frame and clearly visible.
                </h6>
                <div class = "azyo_video_container">
                    <div class = "azyo-selfie-guide-image">
                        <img src="manual circle.png" height = "100%">
                    </div>
                    <video autoplay="true" height="640px" width="480px" class = "azyo_videoElement" id = "azyo_vid"></video>
                </div>
            </div>
            <div class="modal-footer azyo-moal-footer">
                <button type="button" class="btn btn-primary">Take Photo</button>
                <button type="button" class="btn btn-primary" hidden>NEXT</button>
                <p class = "azyo-cc">Powered by AZYO</p>
            </div>
        </div>
        </div>
    </div> -->

    <!-- Modal 3
    <div class="modal fade" id="exampleModal3" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg azyo-modal-dialog" role="document">
        <div class="modal-content azyo-modal-content">
            <div class="modal-header azyo-modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Show the front side of your ID card</h5>
                <button type="button" class="close azyo-close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <h6 class="azyo-modal-body-title">
                    Make sure that your photo is visible clearly in the frame
                </h6>
                <div class = "azyo_video_container">
                    <div class="flip-card" id = "allcard" style = "position:absolute; opacity: 0.6; display: block;">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <img id = "frontpiccard" src="https://raw.githubusercontent.com/monacotime/azyo_embedded_viewport/main/cardfront.png" alt="Avatar" style="width:370px;height:250px;">
                            </div>
                            <div class="flip-card-back">
                                <img id = "backpiccard" src="https://raw.githubusercontent.com/monacotime/azyo_embedded_viewport/main/cardback.png" alt="Avatar" style="width:370px;height:250px;">
                            </div>
                        </div>
                    </div>
                    <video autoplay="true" class = "azyo_videoElement" id = "azyo_vid"></video>
                </div>
            </div>
            <div class="modal-footer azyo-moal-footer">
                <button type="button" class="btn btn-primary">Take Photo</button>
                <p class = "azyo-cc">Powered by AZYO</p>
            </div>
        </div>
        </div>
    </div> -->

    <!-- Modal 4 -->
    <!-- <div class="modal fade" id="exampleModal4" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg azyo-modal-dialog" role="document">
        <div class="modal-content azyo-modal-content">
            <div class="modal-header azyo-modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Turn your ID card around</h5>
                <button type="button" class="close azyo-close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <h6 class="azyo-modal-body-title">
                    Turn your ID card around and take a photo of the other side.
                </h6>
                <div class = "azyo_video_container">
                    <video autoplay="true" class = "azyo_videoElement" id = "azyo_vid"></video>
                </div>
            </div>
            <div class="modal-footer azyo-moal-footer">
                <button type="button" class="btn btn-primary">Take Photo</button>
                <p class = "azyo-cc">Powered by AZYO</p>
            </div>
        </div>
        </div>
    </div>  -->

    <!-- Modal 5 -->
    <div class="modal fade" id="exampleModal5" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg azyo-modal-dialog" role="document">
        <div class="modal-content azyo-modal-content">
            <div class="modal-header azyo-modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Processing your data</h5>
                <button type="button" class="close azyo-close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <h6 class="azyo-modal-body-title">
                    Please wait while we analyse your images
                </h6>
            </div>
            <div class="modal-footer azyo-moal-footer">
                <button type="button" class="btn btn-primary">Take Photo</button>
                <p class = "azyo-cc">Powered by AZYO</p>
            </div>
        </div>
        </div>
    </div>

    <!-- Modal 99 -->
    <div class="modal fade" id="exampleModal99" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg azyo-modal-dialog" role="document">
        <div class="modal-content azyo-modal-content">
            <div class="modal-header azyo-modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Results</h5>
                <button type="button" class="close azyo-close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <h6 class="azyo-modal-body-title">
                    Please wait while we calculate your results
                </h6>


            </div>
            <div class="modal-footer azyo-moal-footer">
                <button type="button" class="btn btn-primary">Proceed</button>
                <p class = "azyo-cc">Powered by AZYO</p>
            </div>
        </div>
        </div>
    </div>

    <!-- Model 97 -->
    <div class="modal fade" id="exampleModal4" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg azyo-modal-dialog" role="document">
        <div class="modal-content azyo-modal-content">
            <div class="modal-header azyo-modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Turn your ID card around</h5>
                <button type="button" class="close azyo-close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                
            </div>
            <div class="modal-footer azyo-moal-footer">
                <button type="button" class="btn btn-primary">Select</button>
                <p class = "azyo-cc">Powered by AZYO</p>
            </div>
        </div>
        </div>
    </div>

    <!-- Modal 98 -->
    <div class="modal fade" id="exampleModal98" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg azyo-modal-dialog" role="document">
        <div class="modal-content azyo-modal-content">
            <div class="modal-header azyo-modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Results</h5>
                <button type="button" class="close azyo-close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body" id="mainzone" style="display: none;">
                <h6 class="azyo-modal-body-title">Make sure that your face is in the frame and clearly visible.</h6>
                <div class="azyo_video_container">
                    <svg class="azyo-selfie-guide" viewbox="0 0 180 180" width="270" height="270" fill="none" aria-hidden="true" focusable="false">
                        <circle opacity="0.4" cx="83" cy="83" r="80" stroke="black" stroke-width="4"></circle>
                    </svg>
                    <video width="640" height="480" autoplay="" id="azyo_vid" class="azyo_videoElement"></video>
                    <canvas style="display: none;"></canvas>
                    <button type="button" style="margin-top:10px;" class="btn btn-primary">Capture</button>
                </div>
            </div>

            <div class="modal-body" style="display: block; background-color: rgba(1, 1, 1, 0.5); text-align: center;" id="dropzone" ondrop="FileHandler.dropHandler(event)" ondragover="FileHandler.dragOverHandler(event)">
                <button id="back_drop" type="button" class="close azyo-close" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h1 id="upload_msg" style="margin-top: 25%;">Drop Here To Upload</h1>
            </div>

            <div class="modal-footer azyo-moal-footer">
                <button type="button" class="btn btn-primary">Proceed</button>
                <p class = "azyo-cc">Powered by AZYO</p>
            </div>
        </div>
        </div>
    </div>

    <script>
        function animate() {
        var card = document.querySelector('.flip-card-inner');
            card.classList.toggle('is-flipped');
        }
        function hide() {
            document.getElementById("allcard").style.display = "none";
        }
        function disp(){
            document.getElementById('allcard').style.display = "block"
        }

        function rotates(){
            console.log("hi")
            setTimeout(disp, 150)
            setTimeout(animate, 1000);
            setTimeout(hide, 3000);
        }

        // //---------------------------front side animation timing handle-------------
        // if(side == "Front"){
        // setTimeout(disp, 500);
        // setTimeout(hide, 2500);
        // }
        // //---------------------------Back side animation timing handle-------------
        // if(side == "Back"){
        // setTimeout(disp, 150)
        // setTimeout(animate, 1000);
        // setTimeout(hide, 3000);
        // }
    </script>

    <script>
        class VideoUtils {

            static init_video(video) {
                if (navigator.mediaDevices.getUserMedia) {
                    navigator.mediaDevices.getUserMedia({ video: true })
                    .then(function (stream) {
                        video.srcObject = stream;
                    })
                    .catch(function (err0r) {
                        console.log("Something went wrong!");
                    });
                }
            }

            static distroy_video(video) {
                var stream = video.srcObject;
                var tracks = stream.getTracks();

                for (var i = 0; i < tracks.length; i++) {
                    var track = tracks[i];
                    track.stop();
                }

                video.srcObject = null;
            }
        }

        class FileHandler {
            static dropHandler(ev) {
                console.log('File(s) dropped');

                // Prevent default behavior (Prevent file from being opened)
                ev.preventDefault();

                if (ev.dataTransfer.items) {
                    for (var i = 0; i < ev.dataTransfer.items.length; i++) {
                        // If dropped items aren't files, reject them
                        if (ev.dataTransfer.items[i].kind === 'file') {
                            var file = ev.dataTransfer.items[i].getAsFile();
                            console.log(file)
                            console.log('... file[' + i + '].name = ' + file.name);
                            document.getElementById('upload_msg').innerHTML = file.name;

                        }
                    }
                } else {
                    // Use DataTransfer interface to access the file(s)
                    for (var i = 0; i < ev.dataTransfer.files.length; i++) {
                        console.log('... file[' + i + '].name = ' + ev.dataTransfer.files[i].name);
                    }
                }
            }

            static dragOverHandler(ev) {
                
                ev.preventDefault();
            }
        }

        function ondragdetect() {   
            document.getElementById('dropzone').style.display = 'block'
            document.getElementById('mainzone').style.display = 'none'
        }
        
        function ondragenddetect() {   
            // document.getElementById('dropzone').style.display = 'none'
            // document.getElementById('mainzone').style.display = 'block'
        }
        
        function reverseondragdetect() {
            document.getElementById('dropzone').style.display = 'none'
            document.getElementById('mainzone').style.display = 'block'
        }
        
        document.getElementById("back_drop").addEventListener('click', ev => {
            reverseondragdetect()
        })
        
        window.addEventListener('dragover', ev => {
            ev.preventDefault()
            ondragdetect()
        })

        window.addEventListener('drop', ev => {
            ev.preventDefault()
            ondragenddetect()
        })
        
        var video = document.getElementById('azyo_vid')
        VideoUtils.init_video(video)
    </script>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>
</html>